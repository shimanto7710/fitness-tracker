#!/bin/bash

echo "üöÄ Fitness Tracker - OkHttp Profiler Test"
echo "=========================================="
echo ""
echo "This script helps you test the OkHttp Profiler integration with OpenRouter API"
echo ""

echo "üì± Prerequisites:"
echo "1. Android Studio with OkHttp Profiler plugin installed"
echo "2. App running in debug mode"
echo "3. Device/emulator connected"
echo ""

echo "üîß OkHttp Profiler Plugin Setup:"
echo "1. In Android Studio: File ‚Üí Settings ‚Üí Plugins"
echo "2. Search for 'OkHttp Profiler'"
echo "3. Install and restart Android Studio"
echo ""

echo "üìä Testing Network Profiling:"
echo "1. Run the app in debug mode"
echo "2. Navigate to 'AI Food Analysis' screen"
echo "3. Take a photo or select image from gallery"
echo "4. Click 'Analyze Food Image' button"
echo "5. Look for 'OkHttp Profiler' tab at bottom of Android Studio"
echo ""

echo "üîç What You'll See in OkHttp Profiler:"
echo "‚Ä¢ Request URL: https://openrouter.ai/api/v1/chat/completions"
echo "‚Ä¢ Request Headers: Authorization, Content-Type"
echo "‚Ä¢ Request Body: JSON with model, messages, and base64 image"
echo "‚Ä¢ Response: AI analysis results from OpenRouter"
echo "‚Ä¢ Timing: Request duration and performance metrics"
echo ""

echo "üìù Sample Request Structure:"
echo "{"
echo "  \"model\": \"qwen/qwen-2.5-vl-7b-instruct\","
echo "  \"messages\": ["
echo "    {"
echo "      \"role\": \"user\","
echo "      \"content\": ["
echo "        {"
echo "          \"type\": \"text\","
echo "          \"text\": \"You are an AI that analyzes images of food...\""
echo "        },"
echo "        {"
echo "          \"type\": \"image_base64\","
echo "          \"image_base64\": \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...\""
echo "        }"
echo "      ]"
echo "    }"
echo "  ]"
echo "}"
echo ""

echo "‚úÖ Benefits of OkHttp Profiler:"
echo "‚Ä¢ Debug API requests in real-time"
echo "‚Ä¢ Monitor network performance"
echo "‚Ä¢ Troubleshoot authentication issues"
echo "‚Ä¢ Verify request/response payloads"
echo "‚Ä¢ Track API call timing"
echo ""

echo "üéØ Next Steps:"
echo "1. Install OkHttp Profiler plugin"
echo "2. Run app in debug mode"
echo "3. Test food image analysis"
echo "4. Monitor network calls in profiler"
echo "5. Debug any issues with request/response"
echo ""

echo "üîó Useful Links:"
echo "‚Ä¢ OkHttp Profiler Plugin: https://plugins.jetbrains.com/plugin/11192-okhttp-profiler"
echo "‚Ä¢ OpenRouter API Docs: https://openrouter.ai/docs"
echo "‚Ä¢ OkHttp Documentation: https://square.github.io/okhttp/"
echo ""

echo "Happy Debugging! üêõ‚ú®"
